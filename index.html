<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maxim Tararushkin · Freelance Hydrographic Surveyor</title>

  <!-- ===================== FAVICONS ===================== -->
  <!-- Animated SVG favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon-animated.svg" id="dynamic-favicon">

  <!-- PNG fallbacks -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

  <!-- Apple touch icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">

  <!-- Optional legacy .ico fallback -->
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Цвет адресной строки на мобилках -->
  <meta name="theme-color" content="#006da8">

  <!-- JS fallback for browsers that don't support animated SVG favicons -->
  <script>
    (function() {
      const test = document.createElement('link');
      const supportsSVG = !!document.createElementNS &&
        !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
      if (!supportsSVG) {
        const favicon = document.getElementById('dynamic-favicon');
        if (favicon) favicon.setAttribute('href', '/favicon-32x32.png');
      } else {
        // Safari sometimes freezes SVG animations in favicons — auto-swap after load
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        if (isSafari) {
          setTimeout(() => {
            const favicon = document.getElementById('dynamic-favicon');
            if (favicon) favicon.setAttribute('href', '/favicon-32x32.png');
          }, 8000); // revert to static after 8s
        }
      }
    })();
  </script>
  <!-- =============================================================== -->

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-M7KXKCZZJT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-M7KXKCZZJT');
  </script>

  <meta name="description" content="Portfolio and CV of Maxim Tararushkin, experienced offshore hydrographic surveyor with 15+ years across cable lay, trenching, subsea rock installation, and offshore construction." />
  <meta name="keywords" content="Hydrographic Surveyor, Offshore Survey, Cable Lay, Trenching, Offshore Wind, Subsea Rock Installation, Qinsy, Qimera, Jan De Nul, Prysmian, DEME, Maxim Tararushkin" />
  
  <!-- Open Graph / Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Maxim Tararushkin · Freelance Hydrographic Surveyor" />
  <meta property="og:description" content="15+ years offshore survey experience — cable lay & burial, trenching, subsea rock installation." />
  <meta property="og:image" content="assets/og-image.jpg" />
  <meta property="og:url" content="" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&family=Bebas+Neue&display=swap" rel="stylesheet">
  
  <!-- Bootstrap Icons for social & file icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --bg:#f7f7f8;
      --text:#0b1220;
      --muted:#556070;
      --line:#e6e8ec;
      --brand:#0e67ff;
      --brand-2:#ffdb1e;
      --max:1080px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg);}
    a{color:inherit}
    
    /* Top bar with Maritime Robotics style */
    .top{
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:100;
      background:rgba(0,0,0,0.1);
      backdrop-filter:blur(20px);
      border-bottom:1px solid rgba(255,255,255,0.1);
      transition:all 0.3s ease;
    }
    .top.scrolled{
      background:rgba(0,0,0,0.95);
      border-bottom:1px solid rgba(255,255,255,0.2);
    }
    .wrap{max-width:var(--max);margin:auto;padding:0 20px}
    .nav{display:flex;gap:18px;align-items:center;justify-content:space-between;height:70px}
    .nav a{font-weight:600;text-decoration:none;color:white;opacity:0.8;transition:all 0.3s ease}
    .nav a:hover{opacity:1;color:var(--brand)}
    
    /* Stacked text logo */
    .logo{
      display:flex;
      flex-direction:column;
      text-decoration:none;
      line-height:1;
      opacity:1 !important;
    }
    .logo:hover{
      opacity:1 !important;
    }
    .logo-first{
      font-size:16px;
      font-weight:700;
      letter-spacing:2px;
      color:white;
    }
    .logo-last{
      font-size:16px;
      font-weight:700;
      letter-spacing:2px;
      color:white;
    }
    
    /* Hamburger menu button - hidden on desktop */
    .hamburger{
      display:none;
      flex-direction:column;
      gap:5px;
      background:none;
      border:none;
      cursor:pointer;
      padding:8px;
      z-index:110;
    }
    .hamburger span{
      display:block;
      width:28px;
      height:3px;
      background:white;
      border-radius:3px;
      transition:all 0.3s ease;
    }
    .hamburger.active span:nth-child(1){
      transform:rotate(45deg) translate(8px, 8px);
    }
    .hamburger.active span:nth-child(2){
      opacity:0;
    }
    .hamburger.active span:nth-child(3){
      transform:rotate(-45deg) translate(7px, -7px);
    }
    
    /* Maritime Robotics-inspired Hero Section */
    .hero{
      position:relative;
      min-height:100vh;
      display:flex;
      align-items:center;
      overflow:hidden;
      background:#000;
    }
    
    /* Video background with increased visibility */
    .hero-video{
      position:absolute;
      top:50%;
      left:50%;
      min-width:100%;
      min-height:100%;
      width:auto;
      height:auto;
      z-index:1;
      transform:translateX(-50%) translateY(-50%);
      filter:brightness(0.8) contrast(1.1) saturate(1.2);
    }
    
    /* Much lighter overlay to show more video */
    .hero::before{
      content:'';
      position:absolute;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:linear-gradient(
        135deg,
        rgba(14, 103, 255, 0.2) 0%,
        rgba(11, 18, 32, 0.3) 40%,
        rgba(0, 0, 0, 0.4) 100%
      );
      z-index:2;
    }
    
    /* Subtle tech pattern overlay with reduced opacity */
    .hero::after{
      content:'';
      position:absolute;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:
        radial-gradient(circle at 20% 80%, rgba(14, 103, 255, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(14, 103, 255, 0.03) 0%, transparent 50%);
      z-index:3;
    }
    
    .hero-content{
      position:relative;
      z-index:10;
      color:white;
      max-width:100%;
      text-align:center;
    }
    
    /* Maritime-style badge */
    .badge{
      display:inline-block;
      font-weight:700;
      font-size:11px;
      letter-spacing:3px;
      color:rgba(255,255,255,0.9);
      background:rgba(14, 103, 255, 0.15);
      padding:10px 20px;
      border-radius:4px;
      border:1px solid rgba(14, 103, 255, 0.3);
      backdrop-filter:blur(10px);
      margin-bottom:32px;
      text-transform:uppercase;
    }
    
    /* Enhanced text shadows for better readability on brighter video */
    .wordmark{
      font-size:clamp(48px, 7vw, 84px);
      line-height:0.95;
      font-weight:900;
      letter-spacing:-2px;
      max-width:100%;
      color:white;
      text-shadow:0 2px 8px rgba(0,0,0,0.9), 0 4px 20px rgba(0,0,0,0.8), 0 8px 40px rgba(0,0,0,0.6);
      margin-bottom:24px;
    }
    
    .wordmark .kicker{
      display:block;
      font-size:clamp(14px, 2.5vw, 18px);
      font-weight:600;
      letter-spacing:2px;
      color:rgba(255,255,255,0.8);
      margin-bottom:16px;
      text-transform:uppercase;
    }
    
    /* Enhanced tagline with Bebas Neue font and stronger shadows */
    .hero-tagline{
      font-family:'Bebas Neue', sans-serif;
      font-size:clamp(32px, 5vw, 64px);
      line-height:1.1;
      color:rgba(255,255,255,0.95);
      margin:24px auto 40px;
      font-weight:400;
      letter-spacing:2px;
      text-shadow:0 2px 8px rgba(0,0,0,0.9), 0 4px 20px rgba(0,0,0,0.7);
      text-transform:uppercase;
      white-space:nowrap;
    }
    
    .hero-sub{
      display:flex;
      gap:20px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      margin-top:40px;
    }
    
    /* Status pill with Maritime Robotics styling */
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:12px 24px;
      border:1px solid rgba(0, 255, 136, 0.4);
      border-radius:6px;
      font-weight:600;
      background:rgba(0, 255, 136, 0.1);
      backdrop-filter:blur(10px);
      color:white;
      font-size:14px;
    }
    
    .pill i{
      display:inline-block;
      width:8px;
      height:8px;
      border-radius:50%;
      background:#00ff88;
      box-shadow:0 0 12px #00ff88;
      animation:pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Maritime Robotics-style CTA buttons */
    .cta{
      display:inline-flex;
      gap:12px;
      align-items:center;
      padding:16px 32px;
      border-radius:6px;
      text-decoration:none;
      font-weight:700;
      font-size:15px;
      transition:all 0.3s ease;
      border:none;
      cursor:pointer;
    }
    
    .cta.primary{
      background:linear-gradient(135deg, var(--brand) 0%, #0056d6 100%);
      color:white;
      box-shadow:0 4px 24px rgba(14, 103, 255, 0.3);
    }
    
    .cta.primary:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 32px rgba(14, 103, 255, 0.4);
    }
    
    .cta.secondary{
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.3);
      backdrop-filter:blur(10px);
      color:white;
    }
    
    .cta.secondary:hover{
      background:rgba(255,255,255,0.2);
      border-color:rgba(255,255,255,0.5);
    }
    
    /* Download CV button with subtle styling */
    .btn-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:12px 20px;
      border:1px solid rgba(255,255,255,0.3);
      border-radius:6px;
      text-decoration:none;
      font-weight:600;
      color:rgba(255,255,255,0.8);
      background:rgba(255,255,255,0.05);
      backdrop-filter:blur(10px);
      transition:all .3s ease;
      font-size:14px;
    }
    
    .btn-pill:hover{
      background:rgba(255,255,255,0.15);
      border-color:rgba(255,255,255,0.5);
      color:white;
    }
    
    /* Sections with refined styling */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:32px}
    .section{padding:80px 0;border-bottom:1px solid var(--line)}
    h2{font-size:clamp(36px, 5vw, 48px);line-height:1.1;margin:0 0 16px;font-weight:800}
    p{margin:0 0 16px;color:var(--muted);line-height:1.6}
    ul{margin:0;padding-left:20px;color:var(--muted)}
    li{margin-bottom:8px;line-height:1.5}
    
    /* Light gray background for content sections */
    .content-sections{
      background:#d9d9d9;
    }
    
    /* Enhanced competencies cards */
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:20px}
    .card{
      background:white;
      border:1px solid var(--line);
      border-radius:12px;
      padding:24px;
      box-shadow:0 2px 8px rgba(0,0,0,0.04);
      transition:all 0.3s ease;
    }
    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 24px rgba(0,0,0,0.1);
    }
    .card h3{margin:0 0 16px;font-size:20px;font-weight:700}
    
    .kv{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .kv div{
      padding:20px;
      border:2px dashed var(--line);
      border-radius:12px;
      text-align:center;
      transition:all 0.3s ease;
    }
    .kv div:hover{
      border-color:var(--brand);
      background:rgba(14, 103, 255, 0.02);
    }
    .muted{color:var(--muted)}
    
    /* Enhanced career/project cards */
    .career-list{display:grid;gap:16px;margin-top:20px}
    .job{
      background:white;
      border:1px solid var(--line);
      border-radius:12px;
      padding:24px;
      display:grid;
      grid-template-columns:1fr auto;
      gap:16px;
      box-shadow:0 2px 8px rgba(0,0,0,0.04);
      transition:all 0.3s ease;
    }
    .job:hover{
      transform:translateY(-1px);
      box-shadow:0 4px 16px rgba(0,0,0,0.08);
    }
    .job .when{font-weight:700;color:var(--brand);font-size:14px}
    .job .role{font-weight:700;margin-bottom:8px;font-size:18px}
    .job .meta{color:var(--muted);font-size:15px;line-height:1.5}
    
    /* Contact section with refined action bar */
    .action-bar{display:flex; flex-wrap:wrap; gap:12px; margin-top:20px}
    .action-bar .btn-pill{
      color:var(--text);
      background:#fff;
      border:1.5px solid var(--line);
      backdrop-filter:none;
    }
    .action-bar .btn-pill:hover{
      background:var(--text);
      color:#fff;
      transform:translateY(-1px);
    }
    
    /* Footer */
    footer{padding:40px 0}
    .small{color:var(--muted);font-size:14px}
    
    /* Responsive design with mobile video fixes */
    @media (max-width: 960px){
      .grid-2{grid-template-columns:1fr}
      .cards{grid-template-columns:repeat(2,1fr)}
      .hero{min-height:80vh;padding:0 20px}
      .hero-sub{gap:16px}
      .cta{padding:14px 24px;font-size:14px}
      
      /* Show hamburger on tablet */
      .hamburger{
        display:flex;
      }
      
      /* Logo adjustment for tablet */
      .logo-first, .logo-last{
        font-size:14px;
      }
      
      /* Adjust navigation for tablet */
      .nav{
        height:60px;
      }
      
      /* Hide navigation by default on tablet */
      .nav nav{
        position:fixed;
        top:0;
        right:-100%;
        width:320px;
        height:100vh;
        background:rgba(11, 18, 32, 0.98);
        backdrop-filter:blur(20px);
        flex-direction:column;
        padding:80px 40px 40px;
        gap:24px !important;
        font-size:18px;
        transition:right 0.3s ease;
        z-index:120;
        border-left:1px solid rgba(255,255,255,0.1);
      }
      
      /* Show navigation when active */
      .nav nav.active{
        right:0;
      }
      
      .nav nav a{
        padding:12px 0;
        border-bottom:1px solid rgba(255,255,255,0.1);
      }
      
      /* Fix video scaling on tablets */
      .hero-video{
        width:100vw;
        height:100vh;
        object-fit:cover;
        object-position:center center;
      }
    }
    
    @media (max-width: 600px){
      .cards{grid-template-columns:1fr}
      .hero{min-height:100vh;padding:0 15px}
      .hero-sub{flex-direction:column;align-items:stretch;gap:12px}
      .cta, .btn-pill{justify-content:center}
      .kv{grid-template-columns:1fr}
      .job{grid-template-columns:1fr;gap:12px}
      .job .when{order:2;text-align:left}
      
      /* Show hamburger on mobile */
      .hamburger{
        display:flex;
      }
      
      /* Mobile navigation adjustments */
      .nav{
        height:60px;
        flex-direction:row;
        padding:0;
      }
      
      .logo{
        margin-bottom:0;
      }
      
      /* Hide navigation by default on mobile */
      .nav nav{
        position:fixed;
        top:0;
        right:-100%;
        width:280px;
        height:100vh;
        background:rgba(11, 18, 32, 0.98);
        backdrop-filter:blur(20px);
        flex-direction:column;
        padding:80px 30px 30px;
        gap:24px !important;
        font-size:16px;
        transition:right 0.3s ease;
        z-index:120;
        border-left:1px solid rgba(255,255,255,0.1);
      }
      
      /* Show navigation when active */
      .nav nav.active{
        right:0;
      }
      
      .nav nav a{
        padding:12px 0;
        border-bottom:1px solid rgba(255,255,255,0.1);
      }
      
      /* Allow tagline to wrap on mobile */
      .hero-tagline{
        white-space:normal;
      }
      
      /* Mobile video optimization */
      .hero-video{
        width:100vw;
        height:100vh;
        min-width:100vw;
        min-height:100vh;
        object-fit:cover;
        object-position:center center;
        transform:translateX(-50%) translateY(-50%) scale(1.1);
      }
      
      /* Adjust hero content for mobile */
      .hero-content{
        text-align:center;
      }
      
      /* Better mobile spacing */
      .wordmark{
        margin-bottom:16px;
      }
      
      .hero-tagline{
        margin:16px auto 32px;
        text-align:center;
      }
    }
    
    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      .hero-video, .pill i {
        animation: none;
      }
      * {
        transition: none !important;
      }
    }
  /* ===================== PROJECTS WORLD MAP (Option A) ===================== */
.kv div[data-open="map"]{ cursor:pointer; }
.kv div[data-open="map"]:focus{ outline: 3px solid rgba(14,103,255,0.35); outline-offset: 3px; }

.projects-map-modal{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9999;
}
.projects-map-modal.is-open{ display:block; }
.projects-map-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,0.60);
}

/* Mobile-first fullscreen */
.projects-map-panel{
  position:absolute;
  inset:0;
  background:#fff;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  border-radius:0;
  box-shadow: 0 30px 90px rgba(0,0,0,0.35);
}
/* Desktop inset */
@media (min-width: 860px){
  .projects-map-panel{
    inset: 5vh 5vw;
    border-radius: 18px;
  }
}

.projects-map-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(0,0,0,0.08);
  background:#fff;
}
.projects-map-title{
  display:flex;
  flex-direction:column;
  gap: 2px;
  min-width: 0;
}
.projects-map-title h3{ margin:0; font-size: 16px; }
.projects-map-title small{ color: var(--muted); }

.projects-map-actions{
  display:flex;
  align-items:center;
  gap: 10px;
  flex: 1;
  justify-content: flex-end;
}
.projects-map-search{
  width: min(380px, 48vw);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.18);
  outline: none;
  font-family: inherit;
}
@media (max-width: 520px){
  .projects-map-search{ width: 100%; }
}

.projects-map-close{
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.15);
  background: #fff;
  cursor:pointer;
  flex: 0 0 auto;
}

.projects-map-content{
  position:relative;
  flex:1;
  min-height:0;
}
.projects-map-split{
  position:relative;
  height:100%;
  min-height:0;
  display:block;
}

#projectsMap{
  width:100%;
  height:100%;
  min-height:60vh;
}

/* Bottom-sheet list (mobile) */
.projects-sheet{
  position:absolute;
  left:0; right:0; bottom:0;
  background:#fff;
  border-top: 1px solid rgba(0,0,0,0.10);
  box-shadow: 0 -12px 40px rgba(0,0,0,0.18);
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  overflow:hidden;
  height: 34vh;
  max-height: 70vh;
  min-height: 84px;
  display:flex;
  flex-direction:column;
}
.projects-sheet.collapsed{ height: 96px; }
.projects-sheet.expanded{ height: 62vh; }

.projects-sheet-handle{
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 10px 0 8px;
  cursor:pointer;
  user-select:none;
}
.projects-sheet-handle::before{
  content:"";
  width: 44px;
  height: 5px;
  border-radius: 999px;
  background: rgba(0,0,0,0.20);
  display:block;
}
.projects-sheet-bar{
  padding: 0 14px 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}
.projects-sheet-bar strong{ font-size: 14px; }
.projects-sheet-bar button{
  border: 1px solid rgba(0,0,0,0.14);
  background:#fff;
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
  font-size: 13px;
}

.projects-list{
  padding: 10px 14px;
  overflow:auto;
  font-size: 14px;
  min-height:0;
}
.projects-item{
  padding: 10px 0;
  border-bottom: 1px dashed rgba(0,0,0,0.12);
}
.projects-item a{ color: var(--brand); text-decoration:none; }
.projects-item a:hover{ text-decoration:underline; }
.projects-sub{ color: var(--muted); font-size: 13px; margin-top: 4px; }

/* Desktop: side panel */
@media (min-width: 860px){
  .projects-map-split{
    display:grid;
    grid-template-columns: 1fr 360px;
  }
  .projects-sheet{
    position:relative;
    height:100%;
    border-radius:0;
    box-shadow:none;
    border-top:0;
    border-left: 1px solid rgba(0,0,0,0.08);
  }
  .projects-sheet-handle{ display:none; }
  .projects-sheet.collapsed, .projects-sheet.expanded{ height:100%; }
}

/* Avoid Leaflet controls under the sheet */
.leaflet-control-container .leaflet-bottom{ margin-bottom: 88px; }
@media (min-width: 860px){
  .leaflet-control-container .leaflet-bottom{ margin-bottom: 0; }
}
/* ======================================================================= */

</style>
  <!-- ===================== PROJECTS WORLD MAP (Leaflet) ===================== -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <!-- ======================================================================= -->

</head>
<body>
  <header class="top" id="navbar">
    <div class="wrap nav">
      <a href="#home" class="logo">
        <span class="logo-first">MAXIM</span>
        <span class="logo-last">TARARUSHKIN</span>
      </a>
      <button class="hamburger" id="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav id="nav-menu" style="display:flex;gap:24px;flex-wrap:wrap">
        <a href="#about">About</a>
        <a href="#competencies">Competencies</a>
        <a href="#career">Career</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
        <a href="https://www.linkedin.com/in/maximtararushkin" target="_blank" rel="noreferrer">LinkedIn</a>
      </nav>
    </div>
  </header>

  <main id="home">
    <!-- HERO SECTION -->
    <section class="hero">
      <video class="hero-video" autoplay muted loop playsinline preload="auto">
        <source src="01.mp4" type="video/mp4">
        <source src="drone1.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="wrap">
        <div class="hero-content">
          <p class="hero-tagline">
            Cable lay, trenching & offshore construction support
          </p>
          <div class="hero-sub">
            <a class="btn-pill" href="#contact">
              <i class="bi bi-envelope-fill"></i>
              Get in Touch
            </a>
            <a class="btn-pill" href="#projects">
              <i class="bi bi-briefcase-fill"></i>
              View Projects
            </a>
            <a class="btn-pill" href="CV_MaximTararushkin.pdf" target="_blank" rel="noopener">
              <i class="bi bi-file-earmark-pdf-fill"></i>
              Download CV
            </a>
          </div>
        </div>
      </div>
    </section>

    <div class="wrap">
      <!-- ABOUT -->
      <section id="about" class="section grid-2">
        <div>
           <h2>About</h2>
          <p>Experienced hydrographic surveyor specialized in renewable energy projects including cable installation and trenching for offshore wind farms and offshore construction.</p>
    
        </div>
        <div>
          <div class="kv">
            <div data-open="map" role="button" tabindex="0"><strong>15+</strong><br><span class="muted">Years Experience</span></div>
            <div data-open="map" role="button" tabindex="0"><strong>20+</strong><br><span class="muted">Countries</span></div>
            <div data-open="map" role="button" tabindex="0"><strong>10+</strong><br><span class="muted">Vessels</span></div>
            <div data-open="map" role="button" tabindex="0"><strong>40+</strong><br><span class="muted">Projects</span></div>
          </div>
        </div>
      </section>

      <!-- COMPETENCIES -->
      <section id="competencies" class="section">
        <h2>Competencies</h2>
        <div class="cards">
          <div class="card">
            <h3>Software</h3>
            <ul>
              <li>Qinsy, Qimera</li>
              <li>Naviscan</li>
              <li>APOS</li>
              <li>Autoclean</li>
            </ul>
          </div>
          <div class="card">
            <h3>Hardware</h3>
            <ul>
              <li>MBES (Reson/R2Sonic/Kongsberg)</li>
              <li>USBL/INS (HiPAP/Rovins)</li>
              <li>GNSS (Trimble/CNav/Septentrio)</li>
              <li>Cable Tracker (TSS440/TSS350)</li>
            </ul>
          </div>
          <div class="card">
            <h3>Certificates</h3>
            <ul>
              <li>FOET with CA-EBS (exp. 17 Apr 2029)</li>
              <li>GWO BST (exp. 18 Aug 2026)</li>
              <li>OGUK (exp. 17 Dec 2027)</li>
              <li>STCW (exp. 13 Oct 2026)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- CAREER -->
      <section id="career" class="section">
        <h2>Career</h2>
        <div class="career-list">
          <div class="job">
            <div>
              <div class="role">Freelance Hydrographic Surveyor</div>
              <div class="meta">Independent surveyor providing services for offshore renewable energy projects and marine construction support worldwide</div>
            </div>
            <div class="when">Jun 2024 – Present</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Senior Surveyor · Jan De Nul</div>
              <div class="meta">Extensive experience across offshore construction, subsea trenching, cable lay support and dredging operations</div>
            </div>
            <div class="when">Sep 2012 – May 2024</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Surveyor · Romona</div>
              <div class="meta">Foundation experience in hydrographic surveying</div>
            </div>
            <div class="when">Apr 2011 – Jun 2012</div>
          </div>
        </div>
      </section>

      <!-- PROJECTS -->
      <section id="projects" class="section">
        <h2>Projects</h2>
        <p class="muted">Selected offshore and coastal survey assignments. Full list available on request.</p>
        <div class="career-list">
          <!-- 2025 -->
          <div class="job">
            <div>
              <div class="role">Coastal Virginia Offshore Wind (USA) — Cable Lay & Burial</div>
              <div class="meta">Company: Prysmian Powerlink · Vessel: CLB Ulisse · Scope: online survey, trenching (Vertical Injector)</div>
            </div>
            <div class="when">May 2025 – Present</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Tyrrhenian Link (Italy) — Cable Lay</div>
              <div class="meta">Company: Prysmian Powerlink · Vessel: CLV Leonardo Da Vinci · Scope: cable lay support, QA/QC</div>
            </div>
            <div class="when">Feb 2025 – Mar 2025</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Sofia Offshore Wind Farm (UK) — Cable Lay & Burial</div>
              <div class="meta">Company: Prysmian Powerlink · Online Surveyor. Vessel: CLV Leonardo Da Vinci · Scope: cable lay support, plough with HD3</div>
            </div>
            <div class="when">Oct 2024 – Nov 2024</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Lightning - Abu Dhabi (UAE) — Cable Lay</div>
              <div class="meta">Company: Prysmian Powerlink · Online Surveyor. Vessel: CLV Leonardo Da Vinci · Scope: cable lay support, touchdown monitoring</div>
            </div>
            <div class="when">Jul 2024 – Aug 2024</div>
          </div>
          <!-- Earlier highlights -->
          <div class="job">
            <div>
              <div class="role">Lightning - Abu Dhabi (UAE)</div>
              <div class="meta">Vessel: MPV Daniel Bernoulli · Online Surveyor. Scope: WROV/TROV mob, Pre-lay mattress installation.</div>
            </div>
            <div class="when">Nov 2023 – Apr 2024</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Formosa 2 (Taiwan) — Cable Lay</div>
              <div class="meta">Vessel: CLV Willem De Vlamingh · Party Chief. Scope: IAC installation, cable removal.</div>
            </div>
            <div class="when">Aug 2023 – Sep 2023</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Changua OWF (Taiwan) — Cable Lay & Burial</div>
              <div class="meta">Vessel: CLV Willem De Vlamingh · Party Chief. Scope: Export cable repair. Trenching of IAC.</div>
            </div>
            <div class="when">May 2023 – Jun 2023</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Changua OWF (Taiwan) — Mobilization</div>
              <div class="meta">Vessel: CLV Willem De Vlamingh · Scope: Trencher PT-1 mobilization, general vessel maintenance</div>
            </div>
            <div class="when">Feb 2023 – Mar 2023</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Fecam OWF (France) — Rock Installation Project</div>
              <div class="meta">Vessel: MPV Adhémar de Saint-Venant · Party Chief. Scope: Subsea rock installation with IFP.</div>
            </div>
            <div class="when">Oct 2022 – Dec 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Kaskasi OWF (Germany) — Rock Installation Project</div>
              <div class="meta">Vessel: MPV Adhémar de Saint-Venant · Party Chief. Scope: Subsea rock installation with IFP.</div>
            </div>
            <div class="when">Sep 2022 – Oct 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Kaskasi OWF (Germany) — Rock Installation Project</div>
              <div class="meta">Vessel: MPV Daniel Bernoulli · Party Chief. Scope: Subsea rock installation with IFP.</div>
            </div>
            <div class="when">Apr 2022 – Jun 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Neart na Gaothe (UK) — Rock Installation Project</div>
              <div class="meta">Vessel: Simon Stevin · Party Chief. Scope: Subsea rock installation with FPROV.</div>
            </div>
            <div class="when">Nov 2021 – Jan 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Tortue (Mauritania) — Rock Installation Project</div>
              <div class="meta">Vessel: Adhémar de Saint-Venant · Online Surveyor. Scope: Subsea rock installation with IFP.</div>
            </div>
            <div class="when">Aug 2021 – Sep 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Kaskasi OWF (Germany) — Rock Installation Project</div>
              <div class="meta">Vessel: Simon Stevin · Online Surveyor. Scope: Subsea rock installation with FPROV</div>
            </div>
            <div class="when">Aug 2021 – Aug 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Akkuyu Power Plant (Turkey) — Rock Installation & Levelling Project</div>
              <div class="meta">Vessel: MPV Daniel Bernoulli · Party Chief. Scope: Subsea rock installation with IFP.</div>
            </div>
            <div class="when">May 2021 – Jun 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Changua OWF (Taiwan) — Subsea Leveling Project</div>
              <div class="meta">Vessel: THSD Francis Beaufort · Surveyor. Scope: Mobilization, support dredging activities.</div>
            </div>
            <div class="when">Jan 2021 – Mar 2022</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Kirinskoye GCF (Russia) — Rock Installation Project</div>
              <div class="meta">Vessel: Joseph Plateau · Party Chief. Scope: Subsea rock installation with FPROV.</div>
            </div>
            <div class="when">Jun 2020 – Sep 2020</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Hainan II (China) — Rock Installation Project</div>
              <div class="meta">Vessel: Joseph Plateau · Online Surveyor: Subsea rock installation with FPROV.</div>
            </div>
            <div class="when">Dec 2019 – Feb 2020</div>
          </div>
          <div class="job">
            <div>
              <div class="role">Jindo & Jeju Island (S. Korea) — Rock Installation Project</div>
              <div class="meta">Vessel: Joseph Plateau · Online Surveyor: Subsea rock installation with FPROV.</div>
            </div>
            <div class="when">Jul 2019 – Aug 2020</div>
          </div>
        </div>
      </section>

      <!-- CONTACT -->
      <section id="contact" class="section">
        <div class="grid-2">
          <div>
            <h2>Contact</h2>
            <p class="muted">For project enquiries and availability, reach out directly.</p>
          </div>
          <div>
            <div class="action-bar">
              <a class="btn-pill" href="mailto:maximm21@gmail.com">
                <i class="bi bi-envelope-fill"></i>
                Email
              </a>
              <a class="btn-pill" href="https://wa.me/44753712736" target="_blank" rel="noreferrer">
                <i class="bi bi-whatsapp"></i>
                WhatsApp
              </a>
              <a class="btn-pill" href="https://www.linkedin.com/in/maximtararushkin" target="_blank" rel="noreferrer">
                <i class="bi bi-linkedin"></i>
                LinkedIn
              </a>
              <a class="btn-pill" href="CV_MaximTararushkin.pdf" target="_blank" rel="noopener">
                <i class="bi bi-file-earmark-pdf-fill"></i>
                Download CV
              </a>
            </div>
          </div>
        </div>
      </section>

      <footer class="section" style="border-bottom:none">
        <div class="small">© <span id="year"></span> Maxim Tararushkin · All rights reserved</div>
      </footer>
    </div>
  </main>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Hamburger menu toggle
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');
    
    hamburger.addEventListener('click', function() {
      hamburger.classList.toggle('active');
      navMenu.classList.toggle('active');
    });
    
    // Close menu when clicking on a link
    const navLinks = navMenu.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        hamburger.classList.remove('active');
        navMenu.classList.remove('active');
      });
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      const isClickInsideNav = navMenu.contains(event.target);
      const isClickOnHamburger = hamburger.contains(event.target);
      
      if (!isClickInsideNav && !isClickOnHamburger && navMenu.classList.contains('active')) {
        hamburger.classList.remove('active');
        navMenu.classList.remove('active');
      }
    });

    // Maritime Robotics-style navbar behavior
    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 100) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // Video loading and error handling
    const video = document.querySelector('.hero-video');
    if (video) {
      video.addEventListener('loadeddata', function() {
        console.log('Video loaded successfully');
      });
      
      video.addEventListener('error', function() {
        console.log('Video failed to load');
        // Fallback: enhance the gradient background
        const hero = document.querySelector('.hero');
        hero.style.background = 'linear-gradient(135deg, rgba(14, 103, 255, 0.9) 0%, rgba(11, 18, 32, 1) 100%)';
      });
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
  <!-- ===================== PROJECTS WORLD MAP (Option A) ===================== -->
  <div id="projectsMapModal" class="projects-map-modal" aria-hidden="true">
    <div class="projects-map-backdrop" data-close="projects-map"></div>

    <div class="projects-map-panel" role="dialog" aria-modal="true" aria-label="Projects world map">
      <div class="projects-map-header">
        <div class="projects-map-title">
          <h3>Projects Worldwide</h3>
          <small id="projectsMapCount">0 projects</small>
        </div>

        <div class="projects-map-actions">
          <input id="projectsMapSearch" class="projects-map-search" type="search" placeholder="Search project / vessel / country…" />
          <button class="projects-map-close" type="button" data-close="projects-map" aria-label="Close map">✕</button>
        </div>
      </div>

      <div class="projects-map-content">
        <div class="projects-map-split">
          <div id="projectsMap"></div>

          <div id="projectsSheet" class="projects-sheet collapsed" aria-label="Projects list">
            <div class="projects-sheet-handle" id="projectsSheetHandle" title="Expand/collapse"></div>
            <div class="projects-sheet-bar">
              <strong>Projects</strong>
              <button type="button" id="projectsSheetToggle">Expand</button>
            </div>
            <div id="projectsMapList" class="projects-list"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ======================================================================= -->

  <!-- ===================== PROJECTS WORLD MAP (Leaflet JS) ===================== -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script>
    // Demo data: replace with your real projects + coordinates
    const PROJECTS = [
      {
            "title": "Coastal Virginia Offshore Wind",
            "country": "USA",
            "from": "2025-05",
            "to": "Present",
            "vessel": "CLB Ulisse",
            "scope": "Cable lay & burial / Trenching",
            "place": "Coastal Virginia Offshore Wind, Virginia Beach, Virginia, USA"
      },
      {
            "title": "Tyrrhenian Link",
            "country": "Italy",
            "from": "2025-02",
            "to": "2025-03",
            "vessel": "CLV Leonardo Da Vinci",
            "scope": "Cable lay support / QA-QC",
            "place": "Tyrrhenian Link, Sicily, Italy"
      },
      {
            "title": "Sofia Offshore Wind Farm",
            "country": "UKCS",
            "from": "2024-10",
            "to": "2024-11",
            "vessel": "CLV Leonardo Da Vinci",
            "scope": "Cable lay & burial",
            "place": "Sofia Offshore Wind Farm, North Sea, United Kingdom"
      },
      {
            "title": "Lightning",
            "country": "UAE",
            "from": "2024-06",
            "to": "2024-08",
            "vessel": "CLV Leonardo Da Vinci",
            "scope": "Cable lay support",
            "place": "Abu Dhabi, United Arab Emirates"
      },
      {
            "title": "Lightning",
            "country": "UAE",
            "from": "2023-11",
            "to": "2024-04",
            "vessel": "MPV Daniel Bernoulli",
            "scope": "WROV/TROV / Pre-lay mattresses",
            "place": "Abu Dhabi, United Arab Emirates"
      },
      {
            "title": "Formosa 1",
            "country": "Taiwan",
            "from": "2023-08",
            "to": "2023-09",
            "vessel": "CLV Willem de Vlamingh",
            "scope": "Cable lay",
            "place": "Formosa 1 Offshore Wind Farm, Miaoli County, Taiwan"
      },
      {
            "title": "Changhua OWF Phase I",
            "country": "Taiwan",
            "from": "2023-05",
            "to": "2023-06",
            "vessel": "CLV Willem de Vlamingh",
            "scope": "Cable lay & burial",
            "place": "Changhua Offshore Wind Farm, Changhua County, Taiwan"
      },
      {
            "title": "Fécamp Offshore Wind Farm",
            "country": "France",
            "from": "2022-10",
            "to": "2022-12",
            "vessel": "MPV Adhémar de Saint-Venant",
            "scope": "Subsea rock installation",
            "place": "Fécamp, Normandy, France"
      },
      {
            "title": "Kaskasi Offshore Wind Farm",
            "country": "Germany",
            "from": "2022-09",
            "to": "2022-10",
            "vessel": "MPV Adhémar de Saint-Venant",
            "scope": "Subsea rock installation",
            "place": "Kaskasi Offshore Wind Farm, North Sea, Germany"
      },
      {
            "title": "Kaskasi Offshore Wind Farm",
            "country": "Germany",
            "from": "2022-04",
            "to": "2022-06",
            "vessel": "MPV Daniel Bernoulli",
            "scope": "Subsea rock installation",
            "place": "Kaskasi Offshore Wind Farm, North Sea, Germany"
      },
      {
            "title": "Neart na Gaoithe",
            "country": "UK",
            "from": "2021-11",
            "to": "2022-01",
            "vessel": "Simon Stevin",
            "scope": "Subsea rock installation",
            "place": "Neart na Gaoithe Offshore Wind Farm, North Sea, Scotland"
      },
      {
            "title": "Greater Tortue Ahmeyim",
            "country": "Mauritania",
            "from": "2021-08",
            "to": "2021-09",
            "vessel": "MPV Adhémar de Saint-Venant",
            "scope": "Subsea rock installation",
            "place": "Greater Tortue Ahmeyim, Mauritania"
      },
      {
            "title": "Akkuyu Power Plant",
            "country": "Turkey",
            "from": "2021-05",
            "to": "2021-06",
            "vessel": "MPV Daniel Bernoulli",
            "scope": "Rock installation / leveling",
            "place": "Akkuyu Nuclear Power Plant, Mersin, Turkey"
      },
      {
            "title": "Changhua OWF Phase I",
            "country": "Taiwan",
            "from": "2021-01",
            "to": "2021-03",
            "vessel": "THSD Francis Beaufort",
            "scope": "Subsea leveling / dredging support",
            "place": "Changhua Offshore Wind Farm, Changhua County, Taiwan"
      },
      {
            "title": "Kirinskoye GCF",
            "country": "Russia (Sakhalin)",
            "from": "2020-06",
            "to": "2020-09",
            "vessel": "Joseph Plateau",
            "scope": "Subsea rock installation",
            "place": "Kirinskoye, Sakhalin Oblast, Russia"
      },
      {
            "title": "Hainan II",
            "country": "China",
            "from": "2019-12",
            "to": "2020-02",
            "vessel": "Joseph Plateau",
            "scope": "Subsea rock installation",
            "place": "Hainan, China"
      },
      {
            "title": "Jindo & Jeju Island",
            "country": "South Korea",
            "from": "2019-07",
            "to": "2019-08",
            "vessel": "Joseph Plateau",
            "scope": "Subsea rock installation",
            "place": "Jeju Island, South Korea"
      },
      {
            "title": "Hainan II",
            "country": "China",
            "from": "2019-03",
            "to": "2019-05",
            "vessel": "Joseph Plateau",
            "scope": "Subsea rock installation",
            "place": "Hainan, China"
      },
      {
            "title": "Trans Adriatic Pipeline (TAP)",
            "country": "Italy",
            "from": "2018-11",
            "to": "2018-12",
            "vessel": "MPV Adhémar de Saint-Venant",
            "scope": "Pipeline support",
            "place": "San Foca, Melendugno, Puglia, Italy"
      },
      {
            "title": "NASR Field",
            "country": "UAE",
            "from": "2018-10",
            "to": "2018-11",
            "vessel": "MPV Daniel Bernoulli",
            "scope": "Field works",
            "place": "Nasr Field, Abu Dhabi, United Arab Emirates"
      },
      {
            "title": "Malampaya Gas Export Pipeline",
            "country": "Philippines",
            "from": "2018-08",
            "to": "2018-08",
            "vessel": "Joseph Plateau",
            "scope": "Pipeline works",
            "place": "Malampaya, Palawan, Philippines"
      },
      {
            "title": "Sabetta",
            "country": "Russia",
            "from": "2017-07",
            "to": "2017-08",
            "vessel": "",
            "scope": "Port works",
            "place": "Sabetta, Yamalo-Nenets Autonomous Okrug, Russia"
      },
      {
            "title": "AB4 Pipeline",
            "country": "Bahrain",
            "from": "2017-02",
            "to": "2017-05",
            "vessel": "",
            "scope": "Pipeline works",
            "place": "Bahrain"
      },
      {
            "title": "Abu Qir Port",
            "country": "Egypt",
            "from": "2016-10",
            "to": "2016-12",
            "vessel": "",
            "scope": "Port works",
            "place": "Abu Qir, Alexandria, Egypt"
      },
      {
            "title": "Sabetta",
            "country": "Russia",
            "from": "2016-07",
            "to": "2017-10",
            "vessel": "",
            "scope": "Port works",
            "place": "Sabetta, Yamalo-Nenets Autonomous Okrug, Russia"
      },
      {
            "title": "Lekki",
            "country": "Nigeria",
            "from": "2016-01",
            "to": "2016-05",
            "vessel": "",
            "scope": "Port / coastal works",
            "place": "Lekki, Lagos, Nigeria"
      },
      {
            "title": "Klaipėda Port",
            "country": "Lithuania",
            "from": "2015-09",
            "to": "2015-11",
            "vessel": "",
            "scope": "Port works",
            "place": "Klaipėda, Lithuania"
      },
      {
            "title": "Türkmenbaşy Port",
            "country": "Turkmenistan",
            "from": "2015-06",
            "to": "2015-08",
            "vessel": "",
            "scope": "Port works",
            "place": "Türkmenbaşy, Turkmenistan"
      },
      {
            "title": "Kapuk Naga Jakarta",
            "country": "Indonesia",
            "from": "2015-04",
            "to": "2015-05",
            "vessel": "",
            "scope": "Coastal works",
            "place": "Jakarta, Indonesia"
      },
      {
            "title": "North Sea (UKCS)",
            "country": "UKCS",
            "from": "2014-12",
            "to": "2015-02",
            "vessel": "Simon Stevin",
            "scope": "Offshore works",
            "place": "North Sea, United Kingdom"
      },
      {
            "title": "Piltun (Sakhalin)",
            "country": "Russia",
            "from": "2014-09",
            "to": "2014-10",
            "vessel": "MPV La Boudeuse",
            "scope": "Offshore works",
            "place": "Piltun, Sakhalin Oblast, Russia"
      },
      {
            "title": "Ayatsil",
            "country": "Mexico",
            "from": "2014-06",
            "to": "2014-08",
            "vessel": "CLV Willem de Vlamingh",
            "scope": "Offshore works",
            "place": "Ayatsil, Gulf of Mexico"
      },
      {
            "title": "Java–Bali Submarine Cable",
            "country": "Indonesia",
            "from": "2014-02",
            "to": "2014-04",
            "vessel": "MPV La Boudeuse",
            "scope": "Cable works",
            "place": "Java, Indonesia"
      },
      {
            "title": "Piltun (Sakhalin)",
            "country": "Russia",
            "from": "2013-07",
            "to": "2013-09",
            "vessel": "MPV La Boudeuse",
            "scope": "Offshore works",
            "place": "Piltun, Sakhalin Oblast, Russia"
      },
      {
            "title": "Sabetta",
            "country": "Russia",
            "from": "2013-07",
            "to": "2013-09",
            "vessel": "",
            "scope": "Port works",
            "place": "Sabetta, Yamalo-Nenets Autonomous Okrug, Russia"
      },
      {
            "title": "Gorgon Project",
            "country": "Australia",
            "from": "2012-11",
            "to": "2013-06",
            "vessel": "Willem de Vlamingh",
            "scope": "Offshore works",
            "place": "Barrow Island, Western Australia, Australia"
      },
      {
            "title": "Tatar Strait",
            "country": "Russia",
            "from": "2012-09",
            "to": "2012-10",
            "vessel": "MPV La Boudeuse",
            "scope": "Offshore works",
            "place": "Tatar Strait, Russia"
      }
];

    const modal = document.getElementById("projectsMapModal");
    const mapCountEl = document.getElementById("projectsMapCount");
    const searchEl = document.getElementById("projectsMapSearch");
    const listEl = document.getElementById("projectsMapList");

    const sheet = document.getElementById("projectsSheet");
    const sheetToggle = document.getElementById("projectsSheetToggle");
    const sheetHandle = document.getElementById("projectsSheetHandle");

    function setSheetState(state){
      sheet.classList.remove("collapsed","expanded");
      sheet.classList.add(state);
      sheetToggle.textContent = state === "expanded" ? "Collapse" : "Expand";
    }

    function toggleSheet(){
      if (window.matchMedia("(min-width: 860px)").matches) return;
      const isExpanded = sheet.classList.contains("expanded");
      setSheetState(isExpanded ? "collapsed" : "expanded");
      setTimeout(() => window.__projectsMap && window.__projectsMap.invalidateSize(), 120);
    }

    sheetToggle.addEventListener("click", toggleSheet);
    sheetHandle.addEventListener("click", toggleSheet);

    // Open map on click (ALL stats)
    document.querySelectorAll('.kv div[data-open="map"]').forEach(el => {
      el.addEventListener("click", openProjectsMap);
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openProjectsMap();
        }
      });
    });

    // Close map (backdrop + close btn)
    modal.querySelectorAll('[data-close="projects-map"]').forEach(el => {
      el.addEventListener("click", closeProjectsMap);
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("is-open")) closeProjectsMap();
    });

    function openProjectsMap(){
      modal.classList.add("is-open");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
      initProjectsMapOnce();

      // Mobile: start collapsed; Desktop: expanded side panel
      if (window.matchMedia("(max-width: 859px)").matches) setSheetState("collapsed");
      else setSheetState("expanded");

      setTimeout(() => window.__projectsMap && window.__projectsMap.invalidateSize(), 150);
      searchEl.value = "";
      renderProjectsList("");
      searchEl.focus({ preventScroll: true });
    }

    function closeProjectsMap(){
      modal.classList.remove("is-open");
      modal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    window.addEventListener("resize", () => {
      if (!modal.classList.contains("is-open")) return;
      if (window.matchMedia("(min-width: 860px)").matches) setSheetState("expanded");
      else if (!sheet.classList.contains("expanded")) setSheetState("collapsed");
      setTimeout(() => window.__projectsMap && window.__projectsMap.invalidateSize(), 120);
    });

    function initProjectsMapOnce(){
      if (window.__projectsMap) return;

      const map = L.map("projectsMap", { worldCopyJump: true }).setView([20, 0], 2);
      window.__projectsMap = map;

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: "&copy; OpenStreetMap"
      }).addTo(map);

      const cluster = L.markerClusterGroup();
      window.__projectsCluster = cluster;

            // Cache coords in localStorage to avoid repeated geocoding calls
      const COORDS_CACHE_KEY = "getsurvey_project_coords_v1";
      const coordsCache = (() => {
        try { return JSON.parse(localStorage.getItem(COORDS_CACHE_KEY) || "{}"); } catch(e) { return {}; }
      })();

      async function geocodePlace(place){
        if (!place) return null;
        if (coordsCache[place]) return coordsCache[place];

        // Nominatim (OpenStreetMap) geocoding
        const url = "https://nominatim.openstreetmap.org/search?format=json&limit=1&q=" + encodeURIComponent(place);
        const res = await fetch(url, { headers: { "Accept": "application/json" } });
        if (!res.ok) return null;
        const data = await res.json();
        if (!data || !data[0]) return null;

        const coord = { lat: Number(data[0].lat), lng: Number(data[0].lon) };
        coordsCache[place] = coord;
        try { localStorage.setItem(COORDS_CACHE_KEY, JSON.stringify(coordsCache)); } catch(e) {}
        return coord;
      }

      // Add markers (sequential geocoding to be gentle)
      (async () => {
        for (let idx = 0; idx < PROJECTS.length; idx++){
          const p = PROJECTS[idx];
          const popup = `
            <div style="min-width:220px">
              <strong>${esc(p.title)}</strong><br/>
              <div>${esc(p.country)} · ${esc(String(p.from || ""))}${p.to ? " – " + esc(String(p.to)) : ""}</div>
              <div><b>Vessel:</b> ${esc(p.vessel || "-")}</div>
              <div><b>Scope:</b> ${esc(p.scope || "-")}</div>
            </div>
          `;

          let lat = p.lat, lng = p.lng;
          if (typeof lat !== "number" || typeof lng !== "number"){
            const coord = await geocodePlace(p.place);
            if (coord) { lat = coord.lat; lng = coord.lng; }
          }

          if (typeof lat === "number" && typeof lng === "number"){
            const marker = L.marker([lat, lng]).bindPopup(popup);
            marker.__projectIndex = idx;
            cluster.addLayer(marker);
          }

          // Polite delay (only impacts missing coords)
          await new Promise(r => setTimeout(r, 900));
        }
      })();
    

      map.addLayer(cluster);

      searchEl.addEventListener("input", () => renderProjectsList(searchEl.value));
      renderProjectsList("");
    }

    function renderProjectsList(q=""){
      const query = q.trim().toLowerCase();
      const filtered = PROJECTS.map((p,i)=>({...p, i})).filter(p => {
        if (!query) return true;
        return (
          (p.title||"").toLowerCase().includes(query) ||
          (p.country||"").toLowerCase().includes(query) ||
          (p.vessel||"").toLowerCase().includes(query) ||
          (p.scope||"").toLowerCase().includes(query) ||
          String(p.year||"").includes(query)
        );
      });

      mapCountEl.textContent = `${filtered.length} project${filtered.length===1?"":"s"}`;

      listEl.innerHTML = filtered.map(p => `
        <div class="projects-item">
          <a href="#" data-zoom="${p.i}"><strong>${esc(p.title)}</strong></a>
          <div class="projects-sub">${esc(p.country)} · ${esc(String(p.from||""))}${p.to ? " – " + esc(String(p.to)) : ""} · ${esc(p.vessel||"")}</div>
        </div>
      `).join("");

      listEl.querySelectorAll("[data-zoom]").forEach(a => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          const index = Number(a.getAttribute("data-zoom"));
          const proj = PROJECTS[index];
          window.__projectsMap.flyTo([proj.lat, proj.lng], 6, { duration: 0.8 });

          window.__projectsCluster.eachLayer(layer => {
            if (layer.__projectIndex === index) layer.openPopup();
          });

          if (window.matchMedia("(max-width: 859px)").matches) setSheetState("collapsed");
        });
      });
    }

    function esc(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[s]));
    }
  </script>
  <!-- ======================================================================= -->

</body>
</html>
